Script started on Thu 02 Aug 2018 09:23:59 AM CEST

PLAY [Take Confirmation from user] ****************************************************************************************************************************************************************************************************************************************************************************************************************************************

TASK [User Confirmation] **************************************************************************************************************************************************************************************************************************************************************************************************************************************************
[User Confirmation]
[32m[1m
-------------------
Playbook Details: 
-------------------

Devices:
--------
	test2nqe31
	test2nqe32
	test2nqe33

Major Actions:
--------------
	=> Deteremine the Backup RE
	=> Copy the package from remote to local Ansible machine
	=> Copy the package from local Ansible machine to device
	=> Disable GRES and NSR
	=> Apply the upgrade/downgrade to Backup RE

[5mDo you want to continue? (YES/NO):
yes
[0;32mok: [localhost][0m

TASK [Aborting - Requested by User] ***************************************************************************************************************************************************************************************************************************************************************************************************************************************
[0;36mskipping: [localhost][0m


TDC Username [ansible]: 
password: 
Please provide the software version to install: 17.1R2-S5
IP of remote machine having the package file [62.243.147.45]: 
Username for host containing Package file: ansible
Password for host containing Package file: 
Package full path(with filename): /home/ansible/Projects/AnsibleTower/RouterSoftwareUpgrade//tmp/jinstall-ppc-17.1R2-S5-signed.tgz

PLAY [Playbook for upgrading the backup Routing Engine on Juniper Routers] ************************************************************************************************************************************************************************************************************************************************************************************************

TASK [Set Play Start Date and Time Variables] *****************************************************************************************************************************************************************************************************************************************************************************************************************************
[0;32mok: [test2nqe31][0m

TASK [Set Playbook Logging Details] ***************************************************************************************************************************************************************************************************************************************************************************************************************************************
[0;32mok: [test2nqe31][0m
Human Readable Log dir is </var/log/ansible/2018-08-02/092508_619847259/playbook/human_readable> on log server <62.243.147.45>
JSON Log dir is </var/log/ansible/2018-08-02/092508_619847259/playbook/json> on log server <62.243.147.45>

TASK [Set the package file name variable] *********************************************************************************************************************************************************************************************************************************************************************************************************************************
[0;32mok: [test2nqe31][0m
[0;32mok: [test2nqe32][0m
[0;32mok: [test2nqe33][0m

TASK [Get software version from filename] *********************************************************************************************************************************************************************************************************************************************************************************************************************************
[0;32mok: [test2nqe31][0m
[0;32mok: [test2nqe32][0m
[0;32mok: [test2nqe33][0m

TASK [Aborting -] *********************************************************************************************************************************************************************************************************************************************************************************************************************************************************
[0;36mskipping: [test2nqe31][0m
[0;36mskipping: [test2nqe32][0m
[0;36mskipping: [test2nqe33][0m

TASK [Gather facts from Junos devices without configuration] **************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;31mfatal: [test2nqe33]: FAILED! => {"changed": false, "msg": "Unable to make a PyEZ connection: ConnectRefusedError(test2nqe33)"}[0m
[0m[0;32mok: [test2nqe32][0m
[0m[0;32mok: [test2nqe31][0m
[0m
TASK [Aborting - Issue in info/fact gathering.] ***************************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;31mfatal: [test2nqe33]: FAILED! => {"changed": false, "msg": "Aborting the play for host test2nqe33 as there was issue while gathering info/facts about the device."}[0m
[0m
TASK [Show Table: Device info/fact] ***************************************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;32mok: [test2nqe31][0m
[0m########## Table: Device Info ####################
[0m+------------+-------+-----+------------------+------------------+---------------+-------------------------------------------------------------------+
| Device     | Model | RE  | Mastership State | Software Version | Switch Style  | Comments                                                          |
+============+=======+=====+==================+==================+===============+===================================================================+
| test2nqe31 | MX104 | RE0 | backup           | 17.4R1-S3.3      | BRIDGE_DOMAIN |                                                                   |
|            |       +-----+------------------+------------------+               |                                                                   |
|            |       | RE1 | master           | 17.1R2-S5        |               |                                                                   |
+------------+-------+-----+------------------+------------------+---------------+-------------------------------------------------------------------+
| test2nqe32 | MX104 | RE0 | master           | 17.1R2-S5        | BRIDGE_DOMAIN | Single RE device                                                  |
+------------+-------+-----+------------------+------------------+---------------+-------------------------------------------------------------------+
| test2nqe33 |       |     |                  |                  |               | Unable to make a PyEZ connection: ConnectRefusedError(test2nqe33) |
+------------+-------+-----+------------------+------------------+---------------+-------------------------------------------------------------------+
[0m
TASK [Aborting - for devices having single RE.] ***************************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;36mskipping: [test2nqe31][0m
[0m[0;31mfatal: [test2nqe32]: FAILED! => {"changed": false, "msg": "Aborting the play for host test2nqe32 as it is single RE device."}[0m
[0m
TASK [Set backup RE variable to re0 if RE0 is the backup RE] **************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;32mok: [test2nqe31][0m
[0m
TASK [Set backup RE variable to re1 if RE1 is the backup RE] **************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;36mskipping: [test2nqe31][0m
[0m
TASK [Abort if unable to determine backup RE] *****************************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;36mskipping: [test2nqe31][0m
[0m
TASK [Set the current backup RE software version variable] ****************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;32mok: [test2nqe31][0m
[0m
TASK [Verfy that backup RE has different software version than that to be installed.] *************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;32mok: [test2nqe31] => {[0m
[0;32m    "changed": false, [0m
[0;32m    "msg": "All assertions passed"[0m
[0;32m}[0m
[0m
TASK [Copy package from remote folder to local folder] ********************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;32mok: [test2nqe31 -> 62.243.147.45][0m
[0m
TASK [Copy package from local folder to device folder] ********************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;33mchanged: [test2nqe31][0m
[0m
TASK [Disable GRES and NSR - Before upgrading the backup RE] **************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;32mok: [test2nqe31][0m
[0m
TASK [Install software on Backup Routing Engine] **************************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;32mok: [test2nqe31][0m
[0m
PLAY RECAP ****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
[0m[0;32mlocalhost[0m                  : [0;32mok=1   [0m changed=0    unreachable=0    failed=0   
[0m[0;33mtest2nqe31[0m                 : [0;32mok=13  [0m [0;33mchanged=1   [0m unreachable=0    failed=0   
[0m[0;31mtest2nqe32[0m                 : [0;32mok=3   [0m changed=0    unreachable=0    [0;31mfailed=1   [0m
[0m[0;31mtest2nqe33[0m                 : [0;32mok=2   [0m changed=0    unreachable=0    [0;31mfailed=2   [0m
[0m
[0m########## Table: Play Failure Summary ####################
[0m+------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------------+
| Device     | Failed Tasks                                          | Message(If Any)                                                                                       |
+============+=======================================================+=======================================================================================================+
| test2nqe33 | Gather facts from Junos devices without configuration | Unable to make a PyEZ connection: ConnectRefusedError(test2nqe33)                                     |
+------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------------+
|            | Aborting - Issue in info/fact gathering.              | Aborting the play for host test2nqe33 as there was issue while gathering info/facts about the device. |
+------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------------+
| test2nqe32 | Aborting - for devices having single RE.              | Aborting the play for host test2nqe32 as it is single RE device.                                      |
+------------+-------------------------------------------------------+-------------------------------------------------------------------------------------------------------+
[0m[0m
Script done on Thu 02 Aug 2018 09:31:18 AM CEST
